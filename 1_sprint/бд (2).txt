Create database proekt;
use proekt;

create table servis(
id_ser int primary key auto_increment,
servis varchar (255) Not null,
logo_ser varchar(255));

create table chastoti (
id_c int primary key auto_increment,
name_c varchar(255));

create table is_active(
id_a int primary key auto_increment,
name_a varchar(255));

create table users (
id_u int primary key auto_increment,
login varchar(55),
password varchar(55));

create table sub(
id_sub int primary key auto_increment,
ser_id int,
cost decimal(8,2),
chastota int(255),         
next_payment_date date,   
is_active int,
created_at int,
foreign key (ser_id) references servis(id_ser),
foreign key (chastota) references chastoti (id_c),
foreign key (is_active) references is_active (name_a));


			



insert into is_active (name_a) values (
"Да"),
("Нет");

insert into servis (servis) values (
"Нетфликс"),
("ЯПЛЮС"),
("Спотифи");

insert into chastoti (name_c) values (
"одноразовая"),
("Ежемесячная"),
("Ежегодная");






ГПТ БД










create database proekt;
use proekt;


create table users (
    id_u int primary key auto_increment,
    login varchar(55) not null unique,
    password varchar(255) not null
);

create table categories (
    id_cat int primary key auto_increment,
    name_cat varchar(255) not null
);

create table servis (
    id_ser int primary key auto_increment,
    servis varchar(255) not null,
    logo_ser varchar(255),
    category_id int,
    foreign key (category_id) references categories(id_cat)
);


create table categories (
    id_cat int primary key auto_increment,
    name_cat varchar(255) not null
);


create table chastoti (
    id_c int primary key auto_increment,
    name_c varchar(255)
);

create table is_active (
    id_a int primary key auto_increment,
    name_a varchar(255)
);


create table sub (
    id_sub int primary key auto_increment,
    user_id int,
    ser_id int,
    cost decimal(8,2),
    chastota int,
    next_payment_date date,
    is_active int,
    created_at timestamp default current_timestamp,
    foreign key (user_id) references users(id_u) on delete cascade,
    foreign key (ser_id) references servis(id_ser),
    foreign key (chastota) references chastoti(id_c),
    foreign key (is_active) references is_active(id_a)
);


create table payments (
    id_pay int primary key auto_increment,
    sub_id int,
    amount decimal(8,2),
    pay_date date,
    foreign key (sub_id) references sub(id_sub) on delete cascade
);




insert into categories (name_cat) values
("Развлечения"),
("Музыка"),
("Образование");


insert into is_active (name_a) values ("Да"), ("Нет");


insert into chastoti (name_c) values
("одноразовая"),
("ежемесячная"),
("ежегодная");


insert into users (login, password) values ("test", "12345");


insert into servis (servis, category_id) values
("Нетфликс", 1),
("ЯПЛЮС", 1),
("Спотифи", 2);


insert into sub (user_id, ser_id, cost, chastota, next_payment_date, is_active)
values (1, 1, 299.00, 2, '2025-10-01', 1);


insert into payments (sub_id, amount, pay_date)
values (1, 299.00, '2025-09-01');





